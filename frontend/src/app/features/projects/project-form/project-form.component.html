<section class="project-form-section">
  <div class="form-header">
    <button type="button" class="back-btn" (click)="onBack()">
      <span class="material-icons">arrow_back</span> Voltar
    </button>
    <h1>{{ isEdit ? 'Editar Projeto' : 'Novo Projeto' }}</h1>
  </div>
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="project-form">
    <div class="form-group">
      <label for="name">Nome do Projeto</label>
      <input id="name" formControlName="name" type="text" required />
    </div>
    <div class="form-group">
      <label for="description">Descrição</label>
      <textarea id="description" formControlName="description"></textarea>
    </div>
    <div class="form-group">
      <label for="clientId">Cliente(s)</label>
      <select id="clientId" formControlName="clientId" multiple>
        <option *ngFor="let client of clients" [value]="client.id">{{ client.name }}</option>
      </select>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="value">Valor Total</label>
        <input id="value" formControlName="value" type="number" required />
      </div>
      <div class="form-group">
        <label for="startDate">Data de Início</label>
        <input id="startDate" formControlName="startDate" type="date" required />
      </div>
      <div class="form-group">
        <label for="endDate">Data Limite</label>
        <input id="endDate" formControlName="endDate" type="date" required />
      </div>
    </div>
    <div class="form-group">
      <label for="address">Endereço da Obra</label>
      <input id="address" formControlName="address" type="text" />
    </div>
    <div class="form-group">
      <label for="scope">Escopo do Projeto</label>
      <input id="scope" formControlName="scope" type="text" placeholder="Ambientes incluídos, área total, observações técnicas" />
    </div>
    <div class="form-group">
      <label>Configuração de Etapas</label>
      <!-- Seleção de etapas, prazos e valores individuais -->
      <div *ngFor="let stage of stages">
        <input type="checkbox" [value]="stage.id" /> {{ stage.name }}
        <input type="date" [value]="stage.planned_start_date" placeholder="Início planejado" />
        <input type="date" [value]="stage.planned_end_date" placeholder="Término planejado" />
        <input type="number" [value]="stage.value" placeholder="Valor" />
        <select [value]="stage.payment_status">
          <option value="pending">Pendente</option>
          <option value="partial">Parcial</option>
          <option value="paid">Pago</option>
        </select>
        <select [value]="stage.status">
          <option value="pending">Pendente</option>
          <option value="in_progress">Em andamento</option>
          <option value="completed">Concluída</option>
          <option value="cancelled">Cancelada</option>
          <option value="on_hold">Em espera</option>
        </select>
      </div>
    </div>
    <div class="form-group">
      <label>Anexos</label>
<!--      <app-file-upload></app-file-upload>-->
    </div>
    <div *ngIf="error" class="error-message">{{ error }}</div>
    <button type="submit" class="btn-padrao" [disabled]="form.invalid || loading">
      <span class="material-icons">save</span> Salvar
    </button>
  </form>
</section>
