<div class="file-upload-container">
  <div class="upload-area"
       [class.drag-over]="dragOver"
       [class.disabled]="!projectId"
       (dragover)="onDragOver($event)"
       (dragleave)="onDragLeave($event)"
       (drop)="onDrop($event)"
       (click)="fileInput.click()">

    <div class="upload-icon">
      <span class="material-icons">cloud_upload</span>
    </div>

    <div class="upload-text" *ngIf="!uploading">
      <p *ngIf="projectId">Clique ou arraste arquivos aqui</p>
      <p *ngIf="!projectId" class="disabled-text">Salve o projeto primeiro para adicionar arquivos</p>
      <small>MÃ¡ximo {{ maxFileSize / 1024 / 1024 }}MB por arquivo</small>
    </div>

    <div class="upload-loading" *ngIf="uploading">
      <app-loading-spinner></app-loading-spinner>
      <p>Fazendo upload...</p>
    </div>

    <input #fileInput
           type="file"
           [multiple]="multiple"
           [disabled]="!projectId"
           (change)="onFileSelect($event)"
           style="display: none;">
  </div>

  <div class="error-message" *ngIf="error">
    {{ error }}
  </div>

  <div class="files-list" *ngIf="files.length > 0">
    <h4>Arquivos do Projeto</h4>
    <div class="file-item" *ngFor="let file of files">
      <div class="file-info">
        <div class="file-icon">
          <span class="material-icons">
            {{ getFileIcon(file.category, file.mime_type) }}
          </span>
        </div>
        <div class="file-details">
          <div class="file-name">{{ file.original_name }}</div>
          <div class="file-meta">
            <span class="file-size">{{ formatFileSize(file.size) }}</span>
            <span class="file-category">{{ getCategoryLabel(file.category) }}</span>
            <span class="file-date">{{ file.created_at | date:'short' }}</span>
          </div>
          <div class="file-description" *ngIf="file.description">
            {{ file.description }}
          </div>
        </div>
      </div>
      <div class="file-actions">
        <button type="button"
                class="btn-icon download-btn"
                (click)="downloadFile(file)"
                title="Baixar arquivo">
          <span class="material-icons">download</span>
        </button>
        <button type="button"
                class="btn-icon delete-btn"
                (click)="deleteFile(file)"
                title="Excluir arquivo">
          <span class="material-icons">delete</span>
        </button>
      </div>
    </div>
  </div>
</div>
